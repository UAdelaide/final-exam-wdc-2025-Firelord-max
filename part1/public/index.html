<!DOCTYPE html>
<html lang="en">
<head>
    <title>Express</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        button {background-color: white; font-size: 1px; bottom: 8px; position: relative; opacity: 25%;}
    </style>
</head>

<body>
    <div id="app">
        <form>name = "Press for image" onSubmit = sike();>
            <label for="dogpic">Some dogs arrive if form submittted:</label>
        </form>
        <h1>Dogghy pics</h1>
        <div v-if="picture">
            <img :src ="picture">
        </div>
        <button type="button" @click="getDogPic">Get Random Dog</button>
    </div>

    <script>
        const app = Vue.createApp({
            data() {
                return {
                    picture: null
                }
            },
            methods: {
                sike () {
                    alert('Silly you, that is not how to get pictures of dog');
                },
                async getDogPic() {
                    const url = `https://dog.ceo/api/breeds/image/random`;
                    try {
                        const response = await fetch(url);
                        const data = await response.json();
                        if (data.status == 'success') {
                            this.picture = data.message;
                        } else {
                            alert("Picture not found");
                            this.picture = null;
                        }
                    } catch (error) {
                        console.error("Fetch error:", error);
                        alert("Something went wrong.");
                    }
                }
            }
        })
        app.mount('#app')
    </script>
</body>
</html>